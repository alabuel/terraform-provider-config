---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "config_workbook Data Source - terraform-provider-config"
subcategory: ""
description: |-
  
---

# config_workbook (Data Source)

### Example - Using a CSV

```terraform
data "config_workbook "csv" {
  csv = <<-EOT
  configuration_item,name,b_create,cidr_block
  vpc,my_vpc,1,"10.0.0.0/16"
  EOT
}

# reading from a csv file
data "config_workbook" "csv_file" {
  csv = file("filename.csv")
  filter {
    name = "columnHeaderName"
    values = ["value1","value2","value3"]
  }
}
```

### Example - Using an Excel file

```terraform
data "config_workbook" "excel" {
  excel = "filename.xlsx"
  worksheet = "Sheet1"
  filter {
    name = "columnHeaderName"
    values = ["value1","value2","value3"]
  }
}

data "config_workbook" "excel" {
  excel = "filename.xlsx"
  worksheet = "Sheet1"
  lookup {
    column = "script_name"
    worksheet = "event_target"
    key = "name"
    value = "script"
  }
}

data "config_workbook" "excel_vertical" {
  excel = "filename.xlsx"
  worksheet = "Sheet2"
  orientation = "vertical"
  configuration_item = "vertical_data"
}
```

### Example - Using a CSV with a config schema

```terraform
data "config_workbook" "csv_using_yaml" {
  csv = file("filename.csv")
  schema = file("schema.yaml")
}

data "config_workbook" "csv_using_json" {
  csv = file("filename.csv")
  schema = file("schema.json")
}
```

### Example - Using an Excel with a config schema
```terraform
data "config_workbook" "excel_using_yaml" {
  excel = "filename.xlsx"
  worksheet = "Sheet1"
  schema = file("schema.yaml")
}

data "config_workbook" "excel_using_json" {
  excel = "filename.xlsx"
  worksheet = "Sheet1"
  schema = file("schema.json")
}
```

### Config Schema format - Example 1
```yaml
# you can set the attribute types
config_schema:
  vpc:
    attr1:
      name: name
      type: string
    attr2:
      name: create
      type: bool
    attr3:
      name: cidr_block
      type: string

# this format assumes that all attributes are of "string" types
config_schema:
  vpc:
    attr1: name
    attr2: create
    attr3: cidr_block

```

### Config Schema format - Example 3
```json
// you can set the attribute types
{
  "config_schema": {
    "vpc": {
      "attr1": {
        "name": "name",
        "type": "string"
      },
      "attr2": {
        "name": "create",
        "type": "bool"
      },
      "attr3": {
        "name": "cidr_block",
        "type": "string"
      }
    }
  }
} 

// this format assumes that all attributes are of "string" types
{
  "config_schema": {
    "vpc": {
      "attr1": "name",
      "attr2": "create",
      "attr3": "cidr_block"
    }
  }
}
```

## Valid attribute types
- string
- number/numeric
- bool/boolean
- map
- list

## Attribute naming convention
1. Should have a column name of "`configuration_item`".  This will identify the item you need to configure
2. Attributes starting with "`attr`" will be substituted with the correct attribute name using the provided schema.
3. You can preset the type of the attribute using prefixes.
    - `s_` or `string_`
    - `n_` or `num_` or `number_` or `numeric_`
    - `b_` or `bool_` or `boolean_`
    - `m_` or `map_`
    - `h_` or `hash_`
    - `l_` or `list_`
    - `t_` or `tag_`
    Attributes without prefixes will be treated as string.  Boolean values are (1,yes,true = True; 0,no,false = False)

## Example 1 using config schema (see `Schema Format` example above)
|configuration_item|attr1|attr2|attr3|
|------------------|-----|-----|-----|
|vpc|my_vpc|1|"10.0.0.0/16"|
|vpc|2nd_vpc|1|"20.0.0.0/16"|

## Example 2
|configuration_item|name|b_create|cidr_block|
|------------------|-----|-----|-----|
|vpc|my_vpc|1|"10.0.0.0/16"|
|vpc|2nd_vpc|1|"20.0.0.0/16"|

### Example 1 and 2 results:
```json
{
  "vpc": [
    {
      "name": "my_vpc",
      "create": true,
      "cidr_block": "10.0.0.0/16"
    },
    {
      "name": "2nd_vpc",
      "create": true,
      "cidr_block": "20.0.0.0/16"
    }
  ]
}
```

## Example 3
|configuration_item|attr1|attr2|attr3|t_environment|t_alias|t_purpose|
|------------------|-----|-----|-----|-------------|-------|---------|
|vpc|my_vpc|1|"10.0.0.0/16"|dev|vpc1|"application vpc"|
|vpc|2nd_vpc|1|"20.0.0.0/16"|dev|vpc2|"database vpc"|

### Example 3 results will be:
```json
{
  "vpc": [
    {
      "name": "my_vpc",
      "create": true,
      "cidr_block": "10.0.0.0/16",
      "tags": {
        "Environment": "dev",
        "Alias": "vpc1",
        "Purpose": "application vpc"
      }
    },
    {
      "name": "2nd_vpc",
      "create": true,
      "cidr_block": "20.0.0.0/16",
      "tags": {
        "Environment": "dev",
        "Alias": "vpc2",
        "Purpose": "database vpc"
      }
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Properties

- **col_end** (String) - (Optional) Sets the end column of the excel worksheet to get the data. Default value is last column with header value.
- **col_start** (String) - (Optional) Sets the start column of the excel worksheet to get the data. Default value is column A.
- **configuration_item** (String) - (Optional) Column name of the configuration item.
- **csv** (String) - (Optional) Comma-separated values passed as a single string.
- **excel** (String) - (Optional) Filename (full-path) of the excel worksheet to get the data.
- **password** (String) - (Optional) Password for the protected excel worksheet
- **schema** (String) - (Optional) JSON/YAML format string containing the schema of the configurations.
- **worksheet** (String) - (Optional) The sheet name of the excel worksheet
- **orientation** (String) - (Optional) default horizontal. Valid values are (horizontal,vertical)
- **filter** (Block) - (Optional) Filter the data
- **lookup** (Block) - (Optional) Replace data using lookup. Like `vlookup` function in Excel

#### There should only be 1 instance of **csv** or **excel**.  You cannot define both on the same data source

### Filter

Nested `filter` blocks have the following structure:
- **name** (String) - (Required) The name of the header/column
- **values** (List) - (Required) The list of valid values to filter

### Lookup

Nested `lookup` blocks have the following structure:
- **column** (String) - (Required) Column name of data you need lookup
- **excel** (String) - (Optional) Filename (full-path) of the excel worksheet to get the lookup.  Default value is current Excel
- **password** (String) - (Optional) Password for the protected excel worksheet. Default value is current Excel password
- **worksheet** (String) - (Optional) Worksheet of the reference data. Default value is current worksheet
- **json** (String) - (Optional) JSON data as lookup source
- **yaml** (String) - (Optional) YAML data as lookup source 
- **column_key** (String) - (Required) Colummn name of the lookup key
- **column_value** (String) - (Required) Column name of the lookup value

#### There should only be 1 instance of **worksheet** or **json** or **yaml**.  You cannot define 2 or more on the same lookup source

### Output

- **id** (String) The ID of this resource.
- **json** (String) - JSON value in string format.  To use this in other resources, you must use the function `jsondecode`.

